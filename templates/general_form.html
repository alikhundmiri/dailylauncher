{% extends 'index.html' %}
{% load staticfiles %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}


{% if messages %}
    {% for message in messages %}
        <p>{{ message }}</p>
    {% endfor %}
{% endif %}

{% block head_extras %}
    {{ form.media }}
{% endblock %}

{% block content_1 %}
<div style="margin-top: 100px" class="row"></div>

<div class="row">
</div>

	<div class="container">
		<div class="row">
			<div class="col-lg-4"></div>
			<div class="col-lg-4 text-center">
				<h1 class="display-5" id="clocktext">
      				Create a new Card!
      			</h1>
				<form method="POST">{% csrf_token %}
					<div class="row">
						<div class="col-lg-12 rounded" style="background-color: #888888; padding: 10px; margin: 10px; color: #ffffff;">
							<p class="lead">Card Name</p>
							{{ group_form.group_name|add_class:'form-control' }}
							{% if group_form.group_name.errors %}
								{% for error in group_form.group_name.errors %}
									{{ error|escape }}
								{% endfor %}
							{% endif %}
						</div>
						{{ link_formset.management_form }}
					
					</div>

					<div>
							<h4><small>You can enter maximum 5 Links in a single card.</small></h4>
						
					</div>
					<div class="row form-group">
						{% for link_form in link_formset %}
							<div class="col-lg-12 link-formset rounded new_cards" style="background-color: #BFBFBF; padding: 10px; margin: 10px; color: #ffffff;">
								<div class="row">
									<div class="col-lg-12">
										<p class="lead">Link</p>
									</div>
									<div class="col-lg-12">
										<div class="row">
											<div class="col-2">
												{{ link_form.title.label_tag }}
											</div>
											<div class="col-10">
												{{ link_form.title|add_class:'form-control'}}
											</div>
										</div>
									</div>
									<div class="col-lg-12">
										<div class="row">
											<div class="col-2">
												{{ link_form.link.label_tag }}
											</div>
											<div class="col-10">
												{{ link_form.link|add_class:'form-control' }}
											</div>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col">
										{% for hidden_field in link_form.hidden_fields %}
											{{ hidden_field }}
										{% endfor %}
									</div>
								</div>
								<div class="row">
									<div class="col">
										{% if link_form.link.errors %}
											{% for error in link_form.link.errors %}
												{{ error|escape }}
											{% endfor %}
										{% endif %}
										{% if link_form.title.errors %}
											{% for error in link_form.title.errors %}
												{{ error|escape }}
											{% endfor %}
										{% endif %}										
									</div>									
								</div>								
							</div>
						{% endfor %}
						{% if link_formset.non_form_errors %}
							{% for error in link_formset.non_form_errors %}
								{{ error|escape }}
							{% endfor %}
						{% endif %}
					</div>
					<br>
					<input type="submit" value="Create Card", class="btn btn-lg btn-primary btn-blockbutton">
	            	<!-- <input type='submit' class='btn btn-lg btn-primary btn-block' name='next' value='{{ nbar }}'/> -->

				</form>
				
      		</div>
      	</div>
	</div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="{% static 'base/formset/jquery.formset.js' %}"></script>

	<script>
		$('.link-formset').formset({
			addText : 'Add More',
			deleteText : 'Delete',
			prefix : 'card_content'

		});
	</script>

{% endblock %}
							<!-- <table>
								<td>
									{{ link_form.title }}
 									{% if link_form.title.errors %}
										{% for error in link_form.title.errors %}
											{{ error|escape }}
										{% endfor %} 
									{% endif %}
								</td>
								<td> > </td>
								<td>							
									{{ link_form.link }}
								</td>
								{% if link_form.link.errors %}
									<td>
										{% for error in link_form.link.errors %}
											{{ error|escape }}
										{% endfor %}
									</td>
								{% endif %}
								
							</table> -->